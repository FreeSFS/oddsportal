{% haml %}

#right_side_bar
    %form#searchForm method="post" action="/search_results"
        %br
        #row
            .large-12.columns
                %label -> Country
                    %select name="league"
                        %option selected="selected" value=""
                        -for league in leagues
                            %option value="{{ league }}" -> {{ league }}

            .large-12.columns
                %label -> League
                    %select name="group" disabled
                        %option selected="selected" value=""

            .large-7.text-left.columns
                %label -> Select year
            .large-5.text-left.columns
                %label -> Coefficient

            .large-7.text-left.columns#years
                %input#2014 name="year" type="checkbox" value="2014" disabled
                %label
                    2014
                %br
            .large-5.columns#years_coeffs
                %input#coefficient name="year_coeff" type="text" autocomplete='off' disabled

            #mySlideContent
            #mySlideToggler
                %a href="javascript:void()" -> Show all years
            

        -if logged
            .row
                %br
                .large-12.columns
                    .row.collapse
                        .small-10.columns
                            %select#select_template name="select_template"
                                %option disabled selected -> select a template
                                -for template in templates
                                    %option value={{ template }} -> {{ template }}

                        .small-2.columns
                            %a#button_get.button.postfix disabled onclick="get_template()" -> get
                        
                .large-12.columns
                    .row.collapse
                        .small-10.columns
                            %input.template_name name="template_name" type="text" placeholder="Template name"

                        .small-2.columns
                            %a#button_save.button.postfix disabled onclick="save_template()" -> save

        .row
            %br
            .large-7.columns
                %label -> Handicap
                    %select#handicap name="handicap"
                        %option value="hda" -> Home/Draw/Away
                        %option value="ou" -> Over/Under

            .large-5.columns
                %label -> Playing at
                    %select name="form_playing_at_types"
                        %option selected value="h" -> At Home
                        %option value="a" -> Away

            .large-7.columns
                %label -> Backing strategy
                    %select#strategy name="strategy"
                        %option value="h" -> Home
                        %option value="d" -> Draw
                        %option value="a" -> Away

            .large-5.columns
                %label -> Value
                    %select#ou_values disabled name="ou_values"
                        -for ou_value in ou_values
                            %option value={{ou_value}} -> {{ ou_value }}

            .large-6.columns
                %label -> Game part
                    %select#game_part name="game_part"
                        %option value="full" -> Full
                        %option value="frst" -> 1st Half
                        %option value="scnd" -> 2nd Half

            .large-6.columns
                %label -> Odds type
                    %select#odds_type name="odds_type"
                        %option value="a" -> Average
                        %option value="h" -> Highest

            .large-6.columns
                %label -> Odds toggle
                    %input.high_input name="odd_toggle" type="text" autocomplete='off'

            .large-6.columns
                %label
                    %i.fa.fa-usd
                    %b -> Stake
                    %input.high_input name="odd_value" type="text" autocomplete='off'

            
            .large-12.columns
                %br
                %input.button.expand disabled type="submit" value="Go"

            .large-12.columns
                %span#error -> {{error}}






%script

    ;Used to hide a list of available years
    $(function(){

        $('#mySlideContent').css('display','none');
        $('#mySlideToggler').click(function(){

            if ($('#mySlideContent').css('display') == 'block') {
                $('#mySlideContent').css('display','none');
                return
            };
            $('#mySlideContent').css('display','block');

        });
    });

    ;Better change it somehow
    var page_height = $( 'html' ).height();
    $('#left_side_bar').css( 'height',page_height+80);
    $('#right_side_bar').css('height',page_height+80);
    
    $("select[name=group]").change(get_years);
    $("select[name=league]").change(get_groups);
    $("#handicap").change(handicap_changed_event);

    $('#searchForm').on('keyup keypress change', search_form_check);


    ;Variable templates comes from Flask view and to be able to use it
    ;we need to convert it to JSON object
    {% if templates %}
        var templates = {{ templates|tojson|safe }}
    {% else %}
        var templates = {}
    {% endif %}


{% endhaml %}